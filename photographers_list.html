<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Kemograghy â€” Ø§Ù„Ù…ØµÙˆØ±ÙŠÙ†</title>
<link rel="stylesheet" href="photographers.css">
<style>
/* Ø¥Ø¶Ø§ÙØ§Øª Ø®Ø§ØµØ© Ø¨ØµÙØ­Ø© Ø§Ù„Ù…ØµÙˆØ±ÙŠÙ† */
.controls { display:flex; gap:10px; flex-wrap:wrap; align-items:center; justify-content:center; margin:18px 0; }
.controls input, .controls select { padding:8px 10px; border-radius:8px; border:1px solid #ddd; min-width:160px; }
.controls label { font-size:14px; margin-left:6px; }

.container-cards { display:flex; flex-wrap:wrap; gap:18px; justify-content:center; padding-bottom:40px; }

.card {
  width:220px; background:#fff; border-radius:12px; padding:12px; text-align:center;
  box-shadow:0 6px 18px rgba(15,15,15,0.06); display:flex; flex-direction:column; gap:8px;
}
.card img { width:100px; height:100px; border-radius:50%; object-fit:cover; margin-inline:auto; }
.card h3 { margin:0; font-size:16px; }
.meta { font-size:13px; color:#666; }
.badge { display:inline-block; padding:4px 8px; border-radius:999px; font-weight:600; font-size:13px; }
.badge.available { background:#e8f6ea; color:#1a8a2a; }
.badge.busy { background:#fdecea; color:#b31b1b; }
.card .actions { margin-top:auto; display:flex; gap:8px; justify-content:center; }
.btn.small { padding:6px 10px; font-size:13px; }
.filter-row { display:flex; gap:10px; align-items:center; justify-content:center; flex-wrap:wrap; margin-bottom:8px; }
.no-results { text-align:center; color:#666; padding:20px; }

/* Modal */
.modal-backdrop { position:fixed; inset:0; background:rgba(0,0,0,0.45); display:none; align-items:center; justify-content:center; z-index:50; }
.modal { background:#fff; width:min(880px,95%); border-radius:12px; padding:18px; box-shadow:0 6px 24px rgba(0,0,0,.2); display:grid; grid-template-columns: 260px 1fr; gap:18px; align-items:start; }
.modal .gallery { display:flex; flex-direction:column; gap:8px; }
.modal .gallery img { width:100%; height:160px; object-fit:cover; border-radius:8px; }
.close-x { position:absolute; top:12px; left:12px; background:#fff; border-radius:8px; padding:6px; cursor:pointer; }

/* booking summary */
.book-summary { background:#f7f9fc; padding:12px; border-radius:8px; margin-top:8px; }
@media (max-width:700px) {
  .modal { grid-template-columns: 1fr; }
  .card { width:100%; max-width:360px; }
}
</style>
</head>
<body>

<header class="site-header">
  <div class="container header-inner">
    <div class="brand">
      <span class="logo">ğŸ“¸</span>
      <span class="brand-name">Kemograghy</span>
    </div>
    <nav class="nav">
      <a href="photographers.html" class="btn">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
      <a href="login.html" class="btn small">ØªØ³Ø¬ÙŠÙ„</a>
    </nav>
  </div>
</header>

<main class="container">
  <h2 style="text-align:center;margin-top:18px">Ø§Ù„Ù…ØµÙˆØ±ÙŠÙ†</h2>

  <div class="controls">
    <input id="qCity" placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© (Ù…Ø«Ø§Ù„: Ø¬Ø¯Ø©)" />
    <select id="qType">
      <option value="">ÙƒÙ„ Ø§Ù„Ø£Ù†ÙˆØ§Ø¹</option>
      <option value="property">ØªØµÙˆÙŠØ± Ø¹Ù‚Ø§Ø±ÙŠ</option>
      <option value="portrait">Ø¬Ù„Ø³Ø§Øª Ø´Ø®ØµÙŠØ©</option>
      <option value="event">ÙØ¹Ø§Ù„ÙŠØ§Øª</option>
    </select>
    <select id="qAvailability">
      <option value="all">Ø§Ù„ÙƒÙ„</option>
      <option value="available">Ù…ØªØ§Ø­ Ø­Ø§Ù„ÙŠØ§Ù‹</option>
      <option value="busy">ØºÙŠØ± Ù…ØªØ§Ø­</option>
    </select>
    <select id="qSort">
      <option value="popular">Ø§Ù„Ø£ÙƒØ«Ø± ØªÙ‚ÙŠÙŠÙ…Ø§Ù‹</option>
      <option value="new">Ø§Ù„Ø£Ø­Ø¯Ø«</option>
      <option value="price_low">Ø§Ù„Ø£Ø±Ø®Øµ</option>
    </select>
    <button id="clearFilters" class="btn">Ù…Ø³Ø­ Ø§Ù„ÙÙ„Ø§ØªØ±</button>
  </div>

  <div id="cards" class="container-cards"></div>

  <div id="noResults" class="no-results" style="display:none">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…ØµÙˆØ±ÙŠÙ† Ø¨Ø­Ø³Ø¨ Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø¨Ø­Ø«.</div>
</main>

<footer class="site-footer">
  <div class="container">
    <p>Â© <span id="yr"></span> Kemograghy â€” Ù…Ù†ØµØ© Ø®Ø¯Ù…Ø© Kemstay</p>
  </div>
</footer>

<!-- Modal file -->
<div id="modalBackdrop" class="modal-backdrop" onclick="closeModal(event)">
  <div class="modal" role="dialog" aria-modal="true" onclick="event.stopPropagation()">
    <button class="close-x" onclick="closeModal()">âœ•</button>
    <div class="gallery" id="modalGallery">
      <!-- ØµÙˆØ± -->
    </div>
    <div class="modal-body">
      <h3 id="modalName"></h3>
      <p class="meta" id="modalCity"></p>
      <p id="modalAbout" style="margin-top:8px">Ø®Ø¨Ø±Ø©ØŒ Ù…Ø¹Ø¯Ø§ØªØŒ Ù†Ø¨Ø°Ø© Ù‚ØµÙŠØ±Ø© Ø¹Ù† Ø§Ù„Ù…ØµÙˆØ±.</p>

      <div style="margin-top:12px">
        <strong>Ø§Ù„Ø®Ø¯Ù…Ø§Øª ÙˆØ§Ù„Ø£Ø³Ø¹Ø§Ø±</strong>
        <div id="modalServices"></div>
      </div>

      <div style="margin-top:12px">
        <strong>Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª</strong>
        <div id="modalReviews"></div>
      </div>

      <div class="book-summary">
        <h4>Ø§Ø­Ø¬Ø² Ø§Ù„Ø¢Ù†</h4>
        <label>Ø§Ù„ØªØ§Ø±ÙŠØ®</label>
        <input id="bookDate" type="date" />
        <label>Ø§Ù„ÙˆÙ‚Øª</label>
        <input id="bookTime" type="time" />
        <label>Ø§Ù„Ø®Ø¯Ù…Ø©</label>
        <select id="bookService"></select>
        <div style="margin-top:8px;display:flex;gap:8px">
          <button class="btn primary" id="confirmBooking">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¬Ø²</button>
          <button class="btn" onclick="closeModal()">Ø¥Ù„ØºØ§Ø¡</button>
        </div>

        <div id="bookingMsg" style="margin-top:10px;color:green;display:none"></div>
      </div>

    </div>
  </div>
</div>

<script>
/* Ø¨ÙŠØ§Ù†Ø§Øª ÙˆÙ‡Ù…ÙŠØ© (ÙŠÙ…ÙƒÙ† ØªØ¹Ø¯ÙŠÙ„ / Ø¥Ø¶Ø§ÙØ©) */
const photographers = [
  {
    id: 'p1',
    name: 'Ø£Ø­Ù…Ø¯ Ø¹Ù„ÙŠ',
    city: 'Ø§Ù„Ø±ÙŠØ§Ø¶',
    available: true,
    rating: 4.8,
    price_from: 200,
    services: [
      { key: 'property', name: 'ØªØµÙˆÙŠØ± Ø¹Ù‚Ø§Ø±ÙŠ (Ø³Ø§Ø¹Ù‡)', price: 200 },
      { key: 'portrait', name: 'Ø¬Ù„Ø³Ø© Ø´Ø®ØµÙŠØ© (45 Ø¯)', price: 250 }
    ],
    profile_image: 'https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=800&q=60',
    gallery: [
      'https://images.unsplash.com/photo-1508921912186-1d1a45ebb3c1?w=1200&q=60',
      'https://images.unsplash.com/photo-1469474968028-56623f02e42e?w=1200&q=60'
    ],
    about: 'Ù…ØµÙˆØ± Ù…Ø­ØªØ±Ù 7 Ø³Ù†ÙˆØ§Øª Ø®Ø¨Ø±Ø©ØŒ Ù…Ø®ØªØµ Ø¨ØªØµÙˆÙŠØ± Ø§Ù„Ø¹Ù‚Ø§Ø± ÙˆØ§Ù„Ù…Ø´Ø±ÙˆØ¹Ø§Øª Ø§Ù„Ø¹Ù‚Ø§Ø±ÙŠØ©.'
  },
  {
    id: 'p2',
    name: 'Ø³Ø§Ø±Ø© Ù…Ø­Ù…Ø¯',
    city: 'Ø¬Ø¯Ø©',
    available: false,
    rating: 4.6,
    price_from: 180,
    services: [
      { key: 'portrait', name: 'Ø¬Ù„Ø³Ø© Ø´Ø®ØµÙŠØ© (30 Ø¯)', price: 180 },
      { key: 'event', name: 'ØªØµÙˆÙŠØ± ÙØ¹Ø§Ù„ÙŠØ§Øª (Ø³Ø§Ø¹Ø©)', price: 300 }
    ],
    profile_image: 'https://images.unsplash.com/photo-1524504388940-b1c1722653e1?w=800&q=60',
    gallery: [
      'https://images.unsplash.com/photo-1524503033411-c9566986fc8f?w=1200&q=60'
    ],
    about: 'Ù…ØªØ®ØµØµØ© Ø¨Ø§Ù„Ø¨ÙˆØ±ØªØ±ÙŠÙ‡ ÙˆÙØ¹Ø§Ù„ÙŠØ§Øª Ø§Ù„Ø´Ø±ÙƒØ§Øª Ø§Ù„ØµØºÙŠØ±Ø©.'
  },
  {
    id: 'p3',
    name: 'Ù…Ø­Ù…Ø¯ Ø­Ø³Ù†',
    city: 'Ø§Ù„Ø¯Ù…Ø§Ù…',
    available: true,
    rating: 4.9,
    price_from: 300,
    services: [
      { key: 'property', name: 'ØªØµÙˆÙŠØ± Ø¹Ù‚Ø§Ø±ÙŠ (Ø¨Ø§Ù‚Ø© ÙƒØ§Ù…Ù„Ø©)', price: 700 },
      { key: 'event', name: 'ØªÙˆØ«ÙŠÙ‚ ÙØ¹Ø§Ù„ÙŠØ§Øª (3 Ø³Ø§Ø¹Ø§Øª)', price: 900 }
    ],
    profile_image: 'https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?w=800&q=60',
    gallery: [
      'https://images.unsplash.com/photo-1488521787991-ed7bbaae773c?w=1200&q=60',
      'https://images.unsplash.com/photo-1501876725168-00c445821c9e?w=1200&q=60'
    ],
    about: 'Ø®Ø¨Ø±Ø© ÙÙŠ ØªØµÙˆÙŠØ± Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„ÙƒØ¨ÙŠØ±Ø© ÙˆØ§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª Ø§Ù„ÙØ§Ø®Ø±Ø©.'
  },
  {
    id: 'p4',
    name: 'Ù„ÙŠÙ„Ù‰ Ø®Ø§Ù„Ø¯',
    city: 'Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©',
    available: true,
    rating: 4.5,
    price_from: 150,
    services: [
      { key: 'portrait', name: 'Ø¬Ù„Ø³Ø© Ø®Ø§Ø±Ø¬ÙŠØ©', price: 150 },
      { key: 'portrait', name: 'Ø¬Ù„Ø³Ø© Ø§Ø³ØªØ¯ÙŠÙˆ', price: 220 }
    ],
    profile_image: 'https://images.unsplash.com/photo-1524504388940-7bfcf6b7d8a4?w=800&q=60',
    gallery: [
      'https://images.unsplash.com/photo-1519340333755-cb25a2ef6d5b?w=1200&q=60'
    ],
    about: 'Ù…ØµÙˆØ±Ø© Ù…Ø¨Ø¯Ø¹Ø© ØªØ±ÙƒØ² Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ø¶Ø§Ø¡Ø© ÙˆØ§Ù„Ù„Ù…Ø³Ø§Øª Ø§Ù„ÙÙ†ÙŠØ©.'
  }
];

/* state */
let results = [...photographers];
const cardsContainer = document.getElementById('cards');

function renderCards(list) {
  cardsContainer.innerHTML = list.map(p => `
    <div class="card" data-id="${p.id}">
      <img src="${p.profile_image}" alt="${p.name}">
      <h3>${p.name}</h3>
      <div class="meta">${p.city} â€” â­ ${p.rating}</div>
      <div>
        <span class="badge ${p.available ? 'available' : 'busy'}">${p.available ? 'Ù…ØªØ§Ø­ Ø­Ø§Ù„ÙŠØ§Ù‹' : 'ØºÙŠØ± Ù…ØªØ§Ø­'}</span>
      </div>
      <div class="meta">Ø§Ø¨ØªØ¯Ø§Ø¡Ù‹ Ù…Ù† ${p.price_from} Ø±ÙŠØ§Ù„</div>
      <div class="actions">
        <button class="btn small" onclick="openProfile('${p.id}')">Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù„Ù</button>
        <a class="btn small" href="tel:0500000000">ğŸ“ Ø§ØªØµØ§Ù„</a>
      </div>
    </div>
  `).join('');
  document.getElementById('noResults').style.display = list.length ? 'none' : 'block';
}

/* ÙÙ„Ø§ØªØ± Ùˆ Ø¨Ø­Ø« */
const qCity = document.getElementById('qCity');
const qType = document.getElementById('qType');
const qAvailability = document.getElementById('qAvailability');
const qSort = document.getElementById('qSort');
document.getElementById('clearFilters').addEventListener('click', () => {
  qCity.value = ''; qType.value = ''; qAvailability.value = 'all'; qSort.value = 'popular';
  applyFilters();
});

[qCity, qType, qAvailability, qSort].forEach(el => el.addEventListener('input', applyFilters));

function applyFilters() {
  const city = qCity.value.trim().toLowerCase();
  const type = qType.value;
  const availability = qAvailability.value;
  const sort = qSort.value;

  let filtered = photographers.filter(p => {
    if (city && !p.city.toLowerCase().includes(city)) return false;
    if (type && !p.services.some(s => s.key === type)) return false;
    if (availability === 'available' && !p.available) return false;
    if (availability === 'busy' && p.available) return false;
    return true;
  });

  if (sort === 'price_low') filtered.sort((a,b)=>a.price_from-b.price_from);
  else if (sort === 'new') filtered = filtered; // Ù‡Ù†Ø§ Ù„Ùˆ ÙƒØ§Ù† Ù„Ø¯ÙŠÙ†Ø§ ØªØ§Ø±ÙŠØ® Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø±ØªØ¨ Ø­Ø³Ø¨Ù‡
  else filtered.sort((a,b)=>b.rating - a.rating);

  results = filtered;
  renderCards(results);
}

/* Modal / profile */
const modal = document.getElementById('modalBackdrop');
const modalName = document.getElementById('modalName');
const modalCity = document.getElementById('modalCity');
const modalAbout = document.getElementById('modalAbout');
const modalGallery = document.getElementById('modalGallery');
const modalServices = document.getElementById('modalServices');
const modalReviews = document.getElementById('modalReviews');
const bookService = document.getElementById('bookService');
const bookDate = document.getElementById('bookDate');
const bookTime = document.getElementById('bookTime');
const bookingMsg = document.getElementById('bookingMsg');
let activePhotographer = null;

function openProfile(id) {
  const p = photographers.find(x => x.id === id);
  if (!p) return;
  activePhotographer = p;
  modalName.textContent = p.name;
  modalCity.textContent = p.city + ' â€” â­ ' + p.rating;
  modalAbout.textContent = p.about;
  modalGallery.innerHTML = p.gallery.map(u => `<img src="${u}" alt="Ø¹Ù…Ù„ Ù„Ù€ ${p.name}" />`).join('');
  modalServices.innerHTML = p.services.map(s => `<div style="margin-top:8px">${s.name} â€” <strong>${s.price} Ø±.Ø³</strong></div>`).join('');
  modalReviews.innerHTML = `<div class="meta">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø±Ø§Ø¬Ø¹Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹ (Ù†Ø³Ø®Ø© ØªØ¬Ø±ÙŠØ¨ÙŠØ©)</div>`;
  // services select
  bookService.innerHTML = p.services.map(s => `<option value="${s.key}__${s.price}">${s.name} â€” ${s.price} Ø±.Ø³</option>`).join('');
  bookingMsg.style.display = 'none';
  // default date = today
  bookDate.valueAsDate = new Date();
  bookTime.value = '10:00';
  modal.style.display = 'flex';
}

/* close modal */
function closeModal(e) {
  if (e && e.target === modal) { modal.style.display = 'none'; return; }
  modal.style.display = 'none';
}

/* booking (Ù…Ø­Ø§ÙƒØ§Ø© ØªØ®Ø²ÙŠÙ† Ù…Ø­Ù„ÙŠ) */
document.getElementById('confirmBooking').addEventListener('click', () => {
  const serviceVal = bookService.value;
  const [serviceKey, servicePrice] = serviceVal.split('__');
  const date = bookDate.value;
  const time = bookTime.value;
  if (!date || !time) { alert('Ø§Ø®ØªØ§Ø± Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„ÙˆÙ‚Øª'); return; }
  const booking = {
    id: 'b_' + Date.now(),
    photographerId: activePhotographer.id,
    photographerName: activePhotographer.name,
    date, time, serviceKey, servicePrice: Number(servicePrice),
    createdAt: new Date().toISOString()
  };
  const existing = JSON.parse(localStorage.getItem('kem_bookings') || '[]');
  existing.push(booking);
  localStorage.setItem('kem_bookings', JSON.stringify(existing));
  bookingMsg.style.display = 'block';
  bookingMsg.textContent = `ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¬Ø² Ø¨ØªØ§Ø±ÙŠØ® ${date} Ø¹Ù†Ø¯ ${time} â€” Ø§Ù„ØªÙƒÙ„ÙØ©: ${servicePrice} Ø±.Ø³ (Ù…Ø­Ù„ÙŠÙ‹Ø§)`;
});

/* init */
document.getElementById('yr').textContent = new Date().getFullYear();
renderCards(photographers);
</script>

</body>
</html>